<!DOCTYPE HTML>
<html lang="en">
<head>
    <title>Inherit Template Demo</title>
    <script src="../bower_components/dom/src/dom.js"></script>
    <script src="../bower_components/on/dist/on.js"></script>
    <script src="../src/create.js"></script>
    <script src="../src/attrs.js"></script>
    <script src="../src/refs.js"></script>
    <script src="../src/template.js"></script>
    <script src="//localhost:35731/livereload.js"></script>
    <style>
        body{
            font-family: sans-serif;
        }
        deep-a,
        deep-b,
        deep-c{
            display: block;
            width: 300px;
            padding: 3px;
            border: 1px solid #eee;
            margin-bottom: 10px;
        }
        deep-e{
            display: block;
            padding: 3px;
            border: 1px solid #eee;
        }
        .deep-a-container,
        .deep-b-container{
            border: 1px solid #ccc;
            padding: 3px;
            font-family: monospace;
        }

        .base-container{
            background-color: #ccffca;
            border: 1px solid #99e790;
            padding: 3px;
        }
        .b-container{
            background-color: #fcffcc;
            border: 1px solid #ffda3d;
            padding: 3px;
        }
    </style>
</head>
<body>
    <template id="deep-a-template">
        <div class="deep-a-container">deep-a template</div>
        <div ref="container" class="base-container">deep-a children</div>
    </template>
    <template id="deep-b-template">
        <div class="deep-b-container">deep-b template</div>
        <div ref="container" class="b-container">deep-b children</div>
    </template>
    <h1>Inherit Template Demo</h1>
    <script>
        create({
            tag: 'deep-a',
            templateId: 'deep-a-template',
            BOO: 'BAW',
            created: function () {
                console.log(' . deep-a.created');
            },

            attached: function () {
                console.log(' . deep-a.attached');
            },

            domReady: function () {
                // FIXME: Cannot
                dom('div', {html:'<strong>deep-a</strong>'}, this);
            }
        });

        create({
            tag: 'deep-b',
            templateId: 'deep-b-template',
            FOO:'MAW',
            extends: 'deep-a',

            created: function () {
                console.log(' - deep-b.created');
                this.super('created');
            },

            attached: function () {
                console.log(' - deep-b.attached');
                this.super('attached');
            },

            domReady: function () {
                dom('div', {html:'<strong>deep-b</strong>'}, this);
                this.super('domReady');
            }
        });
        create({
            tag: 'deep-c',
            extends: 'deep-b',

            created: function () {
                console.log('[[[deep-c.created]]]');
                //this.super('created');
            },

            attached: function () {
                console.log('deep-c.attached');
            },

            domReady: function () {
                dom('div', {html:'<strong>deep-c</strong>'}, this);
                if(this.base){
                    this.base();
                }
                if(this.extend){
                    this.extend();
                }
                console.log('deep.domReady');
                this.super('domReady');
            }
        });
        create({
            tag: 'deep-d',
            extends: 'deep-c'
        });
        create({
            tag: 'deep-e',
            extends: 'deep-d'
        });
    </script>
    <!--<deep-a></deep-a>-->
    <!--<deep-b>-->
        <!--<div>my inner html</div>-->
    <!--</deep-b>-->
    <!--<deep-c></deep-c>-->

    <deep-e></deep-e>

    <script>
        window.node = dom.query('deep-e');
        console.dir(window.node);
    </script>

</body>
</html>