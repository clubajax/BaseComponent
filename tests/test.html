<!DOCTYPE HTML>
<html lang="en">
<head>
    <title>Test create</title>
    <link rel="stylesheet" href="../bower_components/mocha/mocha.css">
    <script src="../bower_components/on/dist/on.js"></script>
    <script src="../bower_components/dom/src/dom.js"></script>
    <script src="../src/create.js"></script>
    <script src="../src/attrs.js"></script>
    <script src="../src/refs.js"></script>
    <script src="../src/template.js"></script>
    <script src="../bower_components/mocha/mocha.js"></script>
    <script src="../bower_components/chai/chai.js"></script>
    <style>
        body{
            padding: 20px;
            font-family: sans-serif;
        }
    </style>
</head>
<body>
    <h1>create test</h1>
    <div id="mocha"></div>
    <div id="widgets"></div>
    <template id="test-widget2-template">
        <div ref="testNode">has template</div>
    </template>
    <script>

        mocha.setup('tdd');

        suite('keys', function() {
            this.timeout(3000);
            var suite = window.suite,
                test = window.test,
                dom = window.dom,
                on = window.on,
                expect = chai.expect,
                widgets = dom.byId('widgets');

            function xsuite () {}
            function xtest () {}

            suite('create-element', function () {
                suite('create', function () {

                    // components can be created in suites, but not in tests
                    // can't call function from within tests either
                    create({
                        tag: 'test-widget'
                    });
                    create({
                        tag: 'test-widget2',
                        templateId: 'test-widget2-template'
                    });

                    xtest('it should create a component', function () {
                        dom('test-widget', {html:'<pre>test widget</pre>'}, widgets);
                        expect(dom.query('test-widget')).to.not.equal(null);
                    });
                    test('it should create a component with a template', function () {
                        dom('test-widget2', {html:'<div>test-widget2</div>'}, widgets);
                        var node = dom.query('test-widget2');
                        expect(node).to.not.equal(null);
                        expect(node.innerHTML.indexOf('has template') > -1).to.equal(true);
                        window.node = node;
                        expect(dom.isNode(node.testNode)).to.equal(true);
                    });
                });
            });
        });

        mocha.run();

    </script>
</body>
</html>