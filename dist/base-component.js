(function n(e,g){if(typeof exports==="object"&&typeof module==="object")module.exports=g(require("dom"),require("on"));else if(typeof define==="function"&&define.amd)define(["dom","on"],g);else if(typeof exports==="object")exports["BaseComponent"]=g(require("dom"),require("on"));else e["BaseComponent"]=g(e["dom"],e["on"])})(this,function(__WEBPACK_EXTERNAL_MODULE_0__,__WEBPACK_EXTERNAL_MODULE_1__){return function(n){var e={};function g(I){if(e[I])return e[I].exports;var t=e[I]={i:I,l:false,exports:{}};n[I].call(t.exports,t,t.exports,g);t.l=true;return t.exports}g.m=n;g.c=e;g.i=function(n){return n};g.d=function(n,e,g){Object.defineProperty(n,e,{configurable:false,enumerable:true,get:g})};g.n=function(n){var e=n&&n.__esModule?function e(){return n["default"]}:function e(){return n};g.d(e,"a",e);return e};g.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)};g.p="/dist";return g(g.s=2)}([/*!******************************************************************************!*\
  !*** external {"commonjs":"dom","commonjs2":"dom","amd":"dom","root":"dom"} ***!
  \******************************************************************************/
function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE_0__;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCB7XCJjb21tb25qc1wiOlwiZG9tXCIsXCJjb21tb25qczJcIjpcImRvbVwiLFwiYW1kXCI6XCJkb21cIixcInJvb3RcIjpcImRvbVwifT81Y2FiIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8wX187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwge1wiY29tbW9uanNcIjpcImRvbVwiLFwiY29tbW9uanMyXCI6XCJkb21cIixcImFtZFwiOlwiZG9tXCIsXCJyb290XCI6XCJkb21cIn1cbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==")},/*!**************************************************************************!*\
  !*** external {"commonjs":"on","commonjs2":"on","amd":"on","root":"on"} ***!
  \**************************************************************************/
function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE_1__;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCB7XCJjb21tb25qc1wiOlwib25cIixcImNvbW1vbmpzMlwiOlwib25cIixcImFtZFwiOlwib25cIixcInJvb3RcIjpcIm9uXCJ9PzEyZmMiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzFfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCB7XCJjb21tb25qc1wiOlwib25cIixcImNvbW1vbmpzMlwiOlwib25cIixcImFtZFwiOlwib25cIixcInJvb3RcIjpcIm9uXCJ9XG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=")},/*!******************************!*\
  !*** ./src/BaseComponent.js ***!
  \******************************/
function(module,exports,__webpack_require__){"use strict";eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// class/component rules\n// always call super() first in the ctor. This also calls the extended class' ctor.\n// cannot call NEW on a Component class\n//\n// Classes http://exploringjs.com/es6/ch_classes.html#_the-species-pattern-in-static-methods\n\nvar _on = __webpack_require__(/*! on */ 1);\nvar dom = __webpack_require__(/*! dom */ 0);\n\nvar BaseComponent = function (_HTMLElement) {\n    _inherits(BaseComponent, _HTMLElement);\n\n    function BaseComponent() {\n        _classCallCheck(this, BaseComponent);\n\n        var _this = _possibleConstructorReturn(this, (BaseComponent.__proto__ || Object.getPrototypeOf(BaseComponent)).call(this));\n\n        _this._uid = dom.uid(_this.localName);\n        privates[_this._uid] = { DOMSTATE: 'created' };\n        privates[_this._uid].handleList = [];\n\n        plugin('init', _this);\n\n        return _this;\n    }\n\n    _createClass(BaseComponent, [{\n        key: 'connectedCallback',\n        value: function connectedCallback() {\n\n            privates[this._uid].DOMSTATE = 'connected';\n            plugin('preConnected', this);\n\n            nextTick(onCheckDomReady.bind(this));\n\n            if (this.connected) {\n                this.connected();\n            }\n            this.fire('connected');\n\n            plugin('postConnected', this);\n        }\n    }, {\n        key: 'disconnectedCallback',\n        value: function disconnectedCallback() {\n            privates[this._uid].DOMSTATE = 'disconnected';\n            plugin('preDisconnected', this);\n            if (this.disconnected) {\n                this.disconnected();\n            }\n            this.fire('disconnected');\n        }\n    }, {\n        key: 'attributeChangedCallback',\n        value: function attributeChangedCallback(attrName, oldVal, newVal) {\n            console.log(' *** attributeChangedCallback', attrName);\n            plugin('preAttributeChanged', this, attrName, newVal, oldVal);\n            if (this.attributeChanged) {\n                this.attributeChanged(attrName, newVal, oldVal);\n            }\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            this.fire('destroy');\n            privates[this._uid].handleList.forEach(function (handle) {\n                handle.remove();\n            });\n            dom.destroy(this);\n        }\n    }, {\n        key: 'fire',\n        value: function fire(eventName, eventDetail, bubbles) {\n            return _on.fire(this, eventName, eventDetail, bubbles);\n        }\n    }, {\n        key: 'emit',\n        value: function emit(eventName, value) {\n            return _on.emit(this, eventName, value);\n        }\n    }, {\n        key: 'on',\n        value: function on(node, eventName, selector, callback) {\n            return this.registerHandle(typeof node != 'string' ? // no node is supplied\n            _on(node, eventName, selector, callback) : _on(this, node, eventName, selector));\n        }\n    }, {\n        key: 'once',\n        value: function once(node, eventName, selector, callback) {\n            return this.registerHandle(typeof node != 'string' ? // no node is supplied\n            _on.once(node, eventName, selector, callback) : _on.once(this, node, eventName, selector, callback));\n        }\n    }, {\n        key: 'registerHandle',\n        value: function registerHandle(handle) {\n            privates[this._uid].handleList.push(handle);\n            return handle;\n        }\n    }, {\n        key: 'DOMSTATE',\n        get: function get() {\n            return privates[this._uid].DOMSTATE;\n        }\n    }], [{\n        key: 'clone',\n        value: function clone(template) {\n            if (template.content && template.content.children) {\n                return document.importNode(template.content, true);\n            }\n            var frag = document.createDocumentFragment(),\n                cloneNode = document.createElement('div');\n            cloneNode.innerHTML = template.innerHTML;\n\n            while (cloneNode.children.length) {\n                frag.appendChild(cloneNode.children[0]);\n            }\n            return frag;\n        }\n    }, {\n        key: 'addPlugin',\n        value: function addPlugin(plug) {\n            var i,\n                order = plug.order || 100;\n            if (!plugins.length) {\n                plugins.push(plug);\n            } else if (plugins.length === 1) {\n                if (plugins[0].order <= order) {\n                    plugins.push(plug);\n                } else {\n                    plugins.unshift(plug);\n                }\n            } else if (plugins[0].order > order) {\n                plugins.unshift(plug);\n            } else {\n\n                for (i = 1; i < plugins.length; i++) {\n                    if (order === plugins[i - 1].order || order > plugins[i - 1].order && order < plugins[i].order) {\n                        plugins.splice(i, 0, plug);\n                        return;\n                    }\n                }\n                // was not inserted...\n                plugins.push(plug);\n            }\n        }\n    }]);\n\n    return BaseComponent;\n}(HTMLElement);\n\nexports.default = BaseComponent;\n\n\nvar privates = {},\n    plugins = [];\n\nfunction plugin(method, node, a, b, c) {\n    plugins.forEach(function (plug) {\n        if (plug[method]) {\n            plug[method](node, a, b, c);\n        }\n    });\n}\n\nfunction onCheckDomReady() {\n    if (this.DOMSTATE != 'connected') {\n        return;\n    }\n\n    var count = 0,\n        children = getChildCustomNodes(this),\n        ourDomReady = onDomReady.bind(this);\n\n    function addReady() {\n        count++;\n        if (count == children.length) {\n            ourDomReady();\n        }\n    }\n\n    // If no children, we're good - leaf node. Commence with onDomReady\n    //\n    if (!children.length) {\n        ourDomReady();\n    } else {\n        // else, wait for all children to fire their `ready` events\n        //\n        children.forEach(function (child) {\n            // check if child is already ready\n            if (child.DOMSTATE == 'domready') {\n                addReady();\n            }\n            // if not, wait for event\n            child.on('domready', addReady);\n        });\n    }\n}\n\nfunction onDomReady() {\n    privates[this._uid].DOMSTATE = 'domready';\n    plugin('preDomReady', this);\n    // call this.domReady first, so that the component\n    // can finish initializing before firing any\n    // subsequent events\n    if (this.domReady) {\n        this.domReady();\n        // domReady should only ever fire once\n        this.domReady = function () {};\n    }\n\n    this.fire('domready');\n\n    plugin('postDomReady', this);\n}\n\nfunction getChildCustomNodes(node) {\n    // collect any children that are custom nodes\n    // used to check if their dom is ready before\n    // determining if this is ready\n    var i,\n        nodes = [];\n    for (i = 0; i < node.children.length; i++) {\n        if (node.children[i].nodeName.indexOf('-') > -1) {\n            nodes.push(node.children[i]);\n        }\n    }\n    return nodes;\n}\n\nfunction nextTick(cb) {\n    requestAnimationFrame(cb);\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvQmFzZUNvbXBvbmVudC5qcz80NTgwIiwid2VicGFjazovLy8/ZDQxZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBjbGFzcy9jb21wb25lbnQgcnVsZXNcbi8vIGFsd2F5cyBjYWxsIHN1cGVyKCkgZmlyc3QgaW4gdGhlIGN0b3IuIFRoaXMgYWxzbyBjYWxscyB0aGUgZXh0ZW5kZWQgY2xhc3MnIGN0b3IuXG4vLyBjYW5ub3QgY2FsbCBORVcgb24gYSBDb21wb25lbnQgY2xhc3Ncbi8vXG4vLyBDbGFzc2VzIGh0dHA6Ly9leHBsb3Jpbmdqcy5jb20vZXM2L2NoX2NsYXNzZXMuaHRtbCNfdGhlLXNwZWNpZXMtcGF0dGVybi1pbi1zdGF0aWMtbWV0aG9kc1xuXG5jb25zdCBvbiA9IHJlcXVpcmUoJ29uJyk7XG5jb25zdCBkb20gPSByZXF1aXJlKCdkb20nKTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmFzZUNvbXBvbmVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5fdWlkID0gZG9tLnVpZCh0aGlzLmxvY2FsTmFtZSk7XG4gICAgICAgIHByaXZhdGVzW3RoaXMuX3VpZF0gPSB7RE9NU1RBVEU6ICdjcmVhdGVkJ307XG4gICAgICAgIHByaXZhdGVzW3RoaXMuX3VpZF0uaGFuZGxlTGlzdCA9IFtdO1xuXG4gICAgICAgIHBsdWdpbignaW5pdCcsIHRoaXMpO1xuXG4gICAgfVxuICAgIFxuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuXG4gICAgICAgIHByaXZhdGVzW3RoaXMuX3VpZF0uRE9NU1RBVEUgPSAnY29ubmVjdGVkJztcbiAgICAgICAgcGx1Z2luKCdwcmVDb25uZWN0ZWQnLCB0aGlzKTtcblxuICAgICAgICBuZXh0VGljayhvbkNoZWNrRG9tUmVhZHkuYmluZCh0aGlzKSk7XG5cbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3RlZCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmlyZSgnY29ubmVjdGVkJyk7XG5cbiAgICAgICAgcGx1Z2luKCdwb3N0Q29ubmVjdGVkJywgdGhpcyk7XG4gICAgfVxuXG4gICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHByaXZhdGVzW3RoaXMuX3VpZF0uRE9NU1RBVEUgPSAnZGlzY29ubmVjdGVkJztcbiAgICAgICAgcGx1Z2luKCdwcmVEaXNjb25uZWN0ZWQnLCB0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMuZGlzY29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3RlZCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmlyZSgnZGlzY29ubmVjdGVkJyk7XG4gICAgfVxuXG4gICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGF0dHJOYW1lLCBvbGRWYWwsIG5ld1ZhbCkge1xuICAgICAgICBjb25zb2xlLmxvZygnICoqKiBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2snLCBhdHRyTmFtZSk7XG4gICAgICAgIHBsdWdpbigncHJlQXR0cmlidXRlQ2hhbmdlZCcsIHRoaXMsIGF0dHJOYW1lLCBuZXdWYWwsIG9sZFZhbCk7XG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZUNoYW5nZWQpIHtcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlQ2hhbmdlZChhdHRyTmFtZSwgbmV3VmFsLCBvbGRWYWwpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5maXJlKCdkZXN0cm95Jyk7XG4gICAgICAgIHByaXZhdGVzW3RoaXMuX3VpZF0uaGFuZGxlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChoYW5kbGUpIHtcbiAgICAgICAgICAgIGhhbmRsZS5yZW1vdmUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRvbS5kZXN0cm95KHRoaXMpO1xuICAgIH1cblxuICAgIGZpcmUoZXZlbnROYW1lLCBldmVudERldGFpbCwgYnViYmxlcykge1xuICAgICAgICByZXR1cm4gb24uZmlyZSh0aGlzLCBldmVudE5hbWUsIGV2ZW50RGV0YWlsLCBidWJibGVzKTtcbiAgICB9XG5cbiAgICBlbWl0KGV2ZW50TmFtZSwgdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIG9uLmVtaXQodGhpcywgZXZlbnROYW1lLCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgb24obm9kZSwgZXZlbnROYW1lLCBzZWxlY3RvciwgY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJIYW5kbGUoXG4gICAgICAgICAgICB0eXBlb2Ygbm9kZSAhPSAnc3RyaW5nJyA/IC8vIG5vIG5vZGUgaXMgc3VwcGxpZWRcbiAgICAgICAgICAgICAgICBvbihub2RlLCBldmVudE5hbWUsIHNlbGVjdG9yLCBjYWxsYmFjaykgOlxuICAgICAgICAgICAgICAgIG9uKHRoaXMsIG5vZGUsIGV2ZW50TmFtZSwgc2VsZWN0b3IpKTtcbiAgICB9XG5cbiAgICBvbmNlKG5vZGUsIGV2ZW50TmFtZSwgc2VsZWN0b3IsIGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVySGFuZGxlKFxuICAgICAgICAgICAgdHlwZW9mIG5vZGUgIT0gJ3N0cmluZycgPyAvLyBubyBub2RlIGlzIHN1cHBsaWVkXG4gICAgICAgICAgICAgICAgb24ub25jZShub2RlLCBldmVudE5hbWUsIHNlbGVjdG9yLCBjYWxsYmFjaykgOlxuICAgICAgICAgICAgICAgIG9uLm9uY2UodGhpcywgbm9kZSwgZXZlbnROYW1lLCBzZWxlY3RvciwgY2FsbGJhY2spKTtcbiAgICB9XG5cbiAgICByZWdpc3RlckhhbmRsZShoYW5kbGUpIHtcbiAgICAgICAgcHJpdmF0ZXNbdGhpcy5fdWlkXS5oYW5kbGVMaXN0LnB1c2goaGFuZGxlKTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZTtcbiAgICB9XG5cbiAgICBnZXQgRE9NU1RBVEUoKSB7XG4gICAgICAgIHJldHVybiBwcml2YXRlc1t0aGlzLl91aWRdLkRPTVNUQVRFO1xuICAgIH1cblxuICAgIHN0YXRpYyBjbG9uZSh0ZW1wbGF0ZSkge1xuICAgICAgICBpZiAodGVtcGxhdGUuY29udGVudCAmJiB0ZW1wbGF0ZS5jb250ZW50LmNoaWxkcmVuKSB7XG4gICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQuaW1wb3J0Tm9kZSh0ZW1wbGF0ZS5jb250ZW50LCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICB2YXJcbiAgICAgICAgICAgIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG4gICAgICAgICAgICBjbG9uZU5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgY2xvbmVOb2RlLmlubmVySFRNTCA9IHRlbXBsYXRlLmlubmVySFRNTDtcblxuICAgICAgICB3aGlsZSAoY2xvbmVOb2RlLmNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICAgICAgZnJhZy5hcHBlbmRDaGlsZChjbG9uZU5vZGUuY2hpbGRyZW5bMF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmcmFnO1xuICAgIH1cblxuICAgIHN0YXRpYyBhZGRQbHVnaW4ocGx1Zykge1xuICAgICAgICB2YXIgaSwgb3JkZXIgPSBwbHVnLm9yZGVyIHx8IDEwMDtcbiAgICAgICAgaWYgKCFwbHVnaW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgcGx1Z2lucy5wdXNoKHBsdWcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHBsdWdpbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBpZiAocGx1Z2luc1swXS5vcmRlciA8PSBvcmRlcikge1xuICAgICAgICAgICAgICAgIHBsdWdpbnMucHVzaChwbHVnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBsdWdpbnMudW5zaGlmdChwbHVnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwbHVnaW5zWzBdLm9yZGVyID4gb3JkZXIpIHtcbiAgICAgICAgICAgIHBsdWdpbnMudW5zaGlmdChwbHVnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcblxuICAgICAgICAgICAgZm9yIChpID0gMTsgaSA8IHBsdWdpbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAob3JkZXIgPT09IHBsdWdpbnNbaSAtIDFdLm9yZGVyIHx8IChvcmRlciA+IHBsdWdpbnNbaSAtIDFdLm9yZGVyICYmIG9yZGVyIDwgcGx1Z2luc1tpXS5vcmRlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2lucy5zcGxpY2UoaSwgMCwgcGx1Zyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB3YXMgbm90IGluc2VydGVkLi4uXG4gICAgICAgICAgICBwbHVnaW5zLnB1c2gocGx1Zyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmxldFxuICAgIHByaXZhdGVzID0ge30sXG4gICAgcGx1Z2lucyA9IFtdO1xuXG5mdW5jdGlvbiBwbHVnaW4obWV0aG9kLCBub2RlLCBhLCBiLCBjKSB7XG4gICAgcGx1Z2lucy5mb3JFYWNoKGZ1bmN0aW9uIChwbHVnKSB7XG4gICAgICAgIGlmIChwbHVnW21ldGhvZF0pIHtcbiAgICAgICAgICAgIHBsdWdbbWV0aG9kXShub2RlLCBhLCBiLCBjKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBvbkNoZWNrRG9tUmVhZHkoKSB7XG4gICAgaWYgKHRoaXMuRE9NU1RBVEUgIT0gJ2Nvbm5lY3RlZCcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhclxuICAgICAgICBjb3VudCA9IDAsXG4gICAgICAgIGNoaWxkcmVuID0gZ2V0Q2hpbGRDdXN0b21Ob2Rlcyh0aGlzKSxcbiAgICAgICAgb3VyRG9tUmVhZHkgPSBvbkRvbVJlYWR5LmJpbmQodGhpcyk7XG5cbiAgICBmdW5jdGlvbiBhZGRSZWFkeSgpIHtcbiAgICAgICAgY291bnQrKztcbiAgICAgICAgaWYgKGNvdW50ID09IGNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICAgICAgb3VyRG9tUmVhZHkoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIG5vIGNoaWxkcmVuLCB3ZSdyZSBnb29kIC0gbGVhZiBub2RlLiBDb21tZW5jZSB3aXRoIG9uRG9tUmVhZHlcbiAgICAvL1xuICAgIGlmICghY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgIG91ckRvbVJlYWR5KCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBlbHNlLCB3YWl0IGZvciBhbGwgY2hpbGRyZW4gdG8gZmlyZSB0aGVpciBgcmVhZHlgIGV2ZW50c1xuICAgICAgICAvL1xuICAgICAgICBjaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICAgICAgLy8gY2hlY2sgaWYgY2hpbGQgaXMgYWxyZWFkeSByZWFkeVxuICAgICAgICAgICAgaWYgKGNoaWxkLkRPTVNUQVRFID09ICdkb21yZWFkeScpIHtcbiAgICAgICAgICAgICAgICBhZGRSZWFkeSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaWYgbm90LCB3YWl0IGZvciBldmVudFxuICAgICAgICAgICAgY2hpbGQub24oJ2RvbXJlYWR5JywgYWRkUmVhZHkpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG9uRG9tUmVhZHkoKSB7XG4gICAgcHJpdmF0ZXNbdGhpcy5fdWlkXS5ET01TVEFURSA9ICdkb21yZWFkeSc7XG4gICAgcGx1Z2luKCdwcmVEb21SZWFkeScsIHRoaXMpO1xuICAgIC8vIGNhbGwgdGhpcy5kb21SZWFkeSBmaXJzdCwgc28gdGhhdCB0aGUgY29tcG9uZW50XG4gICAgLy8gY2FuIGZpbmlzaCBpbml0aWFsaXppbmcgYmVmb3JlIGZpcmluZyBhbnlcbiAgICAvLyBzdWJzZXF1ZW50IGV2ZW50c1xuICAgIGlmICh0aGlzLmRvbVJlYWR5KSB7XG4gICAgICAgIHRoaXMuZG9tUmVhZHkoKTtcbiAgICAgICAgLy8gZG9tUmVhZHkgc2hvdWxkIG9ubHkgZXZlciBmaXJlIG9uY2VcbiAgICAgICAgdGhpcy5kb21SZWFkeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICB0aGlzLmZpcmUoJ2RvbXJlYWR5Jyk7XG5cbiAgICBwbHVnaW4oJ3Bvc3REb21SZWFkeScsIHRoaXMpO1xufVxuXG5mdW5jdGlvbiBnZXRDaGlsZEN1c3RvbU5vZGVzKG5vZGUpIHtcbiAgICAvLyBjb2xsZWN0IGFueSBjaGlsZHJlbiB0aGF0IGFyZSBjdXN0b20gbm9kZXNcbiAgICAvLyB1c2VkIHRvIGNoZWNrIGlmIHRoZWlyIGRvbSBpcyByZWFkeSBiZWZvcmVcbiAgICAvLyBkZXRlcm1pbmluZyBpZiB0aGlzIGlzIHJlYWR5XG4gICAgdmFyIGksIG5vZGVzID0gW107XG4gICAgZm9yIChpID0gMDsgaSA8IG5vZGUuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKG5vZGUuY2hpbGRyZW5baV0ubm9kZU5hbWUuaW5kZXhPZignLScpID4gLTEpIHtcbiAgICAgICAgICAgIG5vZGVzLnB1c2gobm9kZS5jaGlsZHJlbltpXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5vZGVzO1xufVxuXG5mdW5jdGlvbiBuZXh0VGljayhjYikge1xuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShjYik7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL0Jhc2VDb21wb25lbnQuanMiLCJ1bmRlZmluZWRcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFRQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBRUE7QUFFQTs7O0FBRUE7QUFDQTtBQUVBO0FBRUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQTVIQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBNkhBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=")}])});